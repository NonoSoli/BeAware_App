<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercice-medic</title>
    <link rel="stylesheet" href="../../assets/styles/css/main.css">
</head>
<script src="../../js/jquery-3.7.1.min.js"></script>
<script src="../../js/back-to-buttons.js"></script>
    
<body>
    <!--HEADER-->
    <div class="header medic-header">
        <div class="top-header"></div>
        <div class="bottom-header">
            <div class="header-exercice">
                <div class="progress-bar-container">
                    <div class="progress-bar-fill"></div>
                </div>
            </div>
            <div class="grid-header-levels">
                <div class="title-subtitle">
                    <h1 class="header-title" style="margin-top: 0px">Aide m√©dicale</h1>
                    <h4 class="header-subtitle exercice-title"></h4>
                </div>
                <div class="rectangular-button back-to-home">
                    <img src="../../assets/img/icons/close-x.png">
                </div>
            </div>
        </div>
    </div>
    
  
    <div class="main-container">
      <h2 class="exercice-description"></h2>
      <div class="exercice-options"></div>
      <div class="feedback"></div>
      <button class="next-button" style="display: none;">Suivant</button>
    </div>
  
    <script>
      let currentIndex = 0;
      let exercicesData = [];
  
      function updateProgress() {
        const percentage = ((currentIndex + 1) / exercicesData.length) * 100;
        $('.progress-bar-fill').css('width', percentage + '%');
      }
  
      function afficherExercice(index) {
        const exercice = exercicesData[index];
  
        $('.exercice-title').text(exercice.titre);
        $('.exercice-description').text(exercice.description);
        $('.temps-estime').text(exercice.temps_estime);
        $('.consignes-list').empty();
        $('.exercice-options').empty();
        $('.feedback').empty();
        $('.next-button').hide();
  
        exercice.options.forEach(option => {
          const btn = $('<button class="option-button">')
            .append(
              $('<div class="rectangular-button">')
                .append($('<span>').text(option.texte))
            )
            .on('click', function () {
              $('.option-button').prop('disabled', true);
              $(this).find('.rectangular-button').addClass(option.correcte ? 'bonne-reponse' : 'mauvaise-reponse');
              $('.feedback').text(option.feedback);
              $('.next-button').show();
            });
  
          $('.exercice-options').append(btn);
        });
  
        updateProgress();
      }
  
      $(document).ready(function () {
        $.getJSON('../../assets/json/exercices/exercice-1.json', function (data) {
          exercicesData = data.exercices;
          afficherExercice(currentIndex);
        });
  
        $('.next-button').on('click', function () {
          currentIndex++;
          if (currentIndex < exercicesData.length) {
            afficherExercice(currentIndex);
          } else {
            window.location.href = '../../pages/medic/levels.html';
          }
        });
      });
    </script>
  </body>
</html>