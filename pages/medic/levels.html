<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medic - levels</title>
    <link rel="stylesheet" href="../../assets/styles/css/main.css">
</head>
<body class="page-levels">
    <!--HEADER-->
    <div class="header medic-header">
        <div class="top-header"></div>
        <div class="bottom-header">
            <div class="grid-header-levels">
                <div class="title-subtitle">
                    <h1 class="header-title" style="margin-top: 0px">Aide médicale</h1>
                    <h4 class="header-subtitle">Les gestes qui sauvent</h4>
                </div>
                <div class="rectangular-button back-to-home">
                    <img src="../../assets/img/icons/close-x.png">
                </div>
            </div>
        </div>
    </div>

    <!--LEVEL TEMPLATE-->
    <div class="template-level" id="level-template" style="display: none;">
        <div class="grid-level-buttons">
            <div class="diamond-button medic-level-button">
                <span>1</span>
            </div>
            <div class="description">
                <h2>La RCP</h2>
            </div>
        </div>

        <!--PLAYER-->
        <div class="rectangular-box-levels">
            <div class="grid-rectangular-box-level">
                <img src="../../assets/img/icons/levels-medic/chrono-1-3.png">
                <img src="../../assets/img/icons/levels-medic/diff-1-amu.png">
                <img src="../../assets/img/icons/levels-medic/play-amu.png" class="play-button" data-level="1">
                <span>5 min</span>
                <span>facile</span>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="../../js/jquery-3.7.1.min.js"></script>
    <script src="../../js/back-to-buttons.js"></script>
    <script>
        $(document).ready(function () {
            // Charger les niveaux depuis le JSON
            $.getJSON('../../assets/json/exercices_demo.json', function (data) {
                var $template = $('#level-template');

                $.each(data, function (index, level) {
                    var $clone = $template.clone().removeAttr('id').show();
                    var levelNumber = index + 1;

                    // Mise à jour du contenu
                    $clone.find('.diamond-button span').text(levelNumber);
                    $clone.find('h2').text(level.titre);
                    var $spans = $clone.find('.grid-rectangular-box-level span');
                    $spans.eq(0).text(level.temps);
                    $spans.eq(1).text(level.difficulte);

                    // Cacher le player au départ
                    $clone.find('.rectangular-box-levels').hide();

                    // Mettre à jour le bouton play
                    $clone.find('.play-button').attr('data-level', levelNumber);

                    $template.after($clone);
                });

            });

            // Gérer le clic sur le bouton niveau
            $(document).on('click', '.grid-level-buttons', function () {
                var $levelBlock = $(this).closest('.template-level');
                var $playerBox = $levelBlock.find('.rectangular-box-levels');

                $('.rectangular-box-levels').not($playerBox).slideUp();
                $playerBox.stop(true, true).slideToggle();
            });

            // Gérer les clics sur les boutons play
            $(document).on('click', '.play-button', function () {
                var level = parseInt($(this).data('level'), 10);

                if (level === 1) {
                    window.location.href = 'exercice.html';
                } else {
                    window.location.href = '../../home.html';
                }
            });

        });

        // Convertit 1 => "one", 2 => "two", etc.
        function toWord(n) {
            var words = ["one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten"];
            return words[n - 1] || n;
        }
    </script>
</body>
</html>
